
## 1. Primary Constructors (C# 12+)

Primary constructors let you declare constructor parameters directly in the class or struct header and use them to initialize properties.

```csharp
class Person(string name, int age)
{
    public string Name { get; } = name;
    public int Age { get; } = age;
}
```
Equivalent to:
```C#
class Person
{
    public string Name { get; }
    public int Age { get; }

    public Person(string name, int age)
    {
        Name = name;
        Age = age;
    }
}
```
Cleaner syntax and parameters can be directly referenced in property initializers.

## 2. Variable Capture (Closures)

When a lambda or local function uses a variable from the outside scope, that variable is captured.
```C#
int x = 10;
Func<int> f = () => x + 1;
x = 20;
Console.WriteLine(f()); // prints 21
```
The variable `x` is captured by reference, not by value.

### Capture by Copy vs Capture by Reference

|Type|Behavior|
|---|---|
|Value type (struct)|Captured by copy (a snapshot of the value)|
|Reference type (class)|Captured by reference (points to the same object)|

Example:
```C#
struct S { public int v; }
class C { public int v; }

S s = new S { v = 10 };
C c = new C { v = 10 };

Func<int> fs = () => s.v;
Func<int> fc = () => c.v;

s.v = 20;
c.v = 20;

Console.WriteLine(fs()); // 10 (struct captured by copy)
Console.WriteLine(fc()); // 20 (class captured by reference)

```
___
## 3. Records and Immutability

A record is a special type of class (or struct) that emphasizes immutable data and value equality.
```C#
public record Person(string Name, int Age);
```
Expanded version:
```C#
public record Person
{
    public string Name { get; init; }
    public int Age { get; init; }

    public Person(string name, int age)
    {
        Name = name;
        Age = age;
    }
}
```

### Features
- Auto-generated init-only properties
- Built-in value equality
- Deconstruct() and ToString() methods
- Supports the `with` expression
```C#
var p1 = new Person("Alice", 25);
var p2 = p1 with { Age = 30 }; // copy with one change
```

## 4. Properties in Records and Structs

### Records
- Use `{ get; init; }` properties for immutability.
- Automatically generated from primary constructor parameters.
- Included in equality comparisons and deconstruction.
```C#
public record R(string Name, int Age);
```
### Structs

Structs can also use primary constructors (C# 12+):
```C#
public struct Point(int X, int Y);
```
Equivalent to:
```C#
public struct Point {
    public int X { get; set; }
    public int Y { get; set; }
}

```
Structs are value types, so theyâ€™re copied when assigned.
```C#
var p1 = new Point(1, 2);
var p2 = p1;
p2.X = 5;
Console.WriteLine(p1.X); // still 1

```

## 5. Summary Table

| Concept             | Description                                 | Key Behavior                                   |
| ------------------- | ------------------------------------------- | ---------------------------------------------- |
| Primary Constructor | Declare constructor params in class header  | Used for concise initialization                |
| Variable Capture    | Lambda uses outer variable                  | Captured by reference (class) or copy (struct) |
| Record              | Immutable data class with value equality    | Built-in `with`, `init`, and equality          |
| Struct              | Value type, copied on assignment            | Good for small immutable data                  |
| Property vs Field   | Property controls access, field is raw data | Properties can use `get; init;` or validation  |


